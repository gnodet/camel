/*
 * This file was generated by the Gradle 'init' task.
 */

dependencies {
    compile project(':camel-parent:tooling:json-simple-ordered')
    testCompile 'com.fasterxml.jackson.core:jackson-databind:2.9.7'
    testCompile project(':camel-parent:camel-core')
    testCompile project(':camel-parent:components:camel-jsonpath')
    testCompile 'org.apache.activemq:activemq-camel:5.16.0-SNAPSHOT'
    testCompile 'junit:junit:4.12'
    testCompile 'org.apache.logging.log4j:log4j-api:2.11.1'
    testCompile 'org.apache.logging.log4j:log4j-core:2.11.1'
    testCompile 'org.apache.logging.log4j:log4j-slf4j-impl:2.11.1'
}

description = 'Camel :: Platforms :: Camel Catalog'

task generateSources(type: Copy) {
    from "../../camel-api/src/main/java/org/apache/camel/runtimecatalog"
    from "../../camel-core/src/main/java/org/apache/camel/runtimecatalog/impl"
    into "$buildDir/generated/org/apache/camel/catalog"
    include 'EndpointValidationResult.java'
    include 'JSonSchemaResolver.java'
    include 'LanguageValidationResult.java'
    include 'AbstractCamelCatalog.java'
    include 'CamelContextJsonSchemaResolver.java'
    include 'CatalogHelper.java'
    include 'JSonSchemaHelper.java'
    include 'SuggestionStrategy.java'
    include 'TimePatternConverter.java'
    include 'UnsafeUriCharactersEncoder.java'
    include 'URISupport.java'
    doLast {
        ant.replace(
                dir: 'build/generated/org/apache/camel/catalog',
                token: 'org.apache.camel.runtimecatalog.impl',
                value: 'org.apache.camel.catalog'
        )
        ant.replace(
                dir: 'build/generated/org/apache/camel/catalog',
                token: 'org.apache.camel.runtimecatalog',
                value: 'org.apache.camel.catalog'
        )
    }
}

sourceSets {
    generated {
        java.srcDir "${buildDir}/generated/"
    }
}

compileGeneratedJava {
    dependsOn(generateSources)
    classpath = configurations.compile
}

compileJava{
    dependsOn(compileGeneratedJava)
    source += sourceSets.generated.java
}
